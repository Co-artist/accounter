# 项目文件整理计划

## 1. 现有文件结构分析

### 前端文件
- 位置：`src/`
- 内容：Vue 组件、路由、store、国际化等前端代码
- 状态：结构完整，无需变动

### 后端文件
- 位置：`backend/`
- 内容：服务器、路由、控制器、中间件、服务等后端代码
- 状态：结构完整，部分数据库相关文件需要分离

### 数据库相关文件
- 位置：分散在 `backend/` 文件夹中
- 内容：数据库配置、模型、清理脚本等
- 状态：需要统一整理到单独的数据库文件夹

## 2. 整理方案

### 2.1 保留现有文件夹
- `src/`：作为前端文件夹，保持不变
- `backend/`：作为后端文件夹，保留服务器相关代码

### 2.2 创建数据库文件夹
- 创建新文件夹：`database/`
- 用于存储所有数据库相关文件

### 2.3 文件移动计划

#### 从 `backend/` 移动到 `database/` 的文件
1. **数据库配置文件**：
   - `backend/config/db.js` → `database/config/db.js`

2. **数据库模型**：
   - `backend/models/` 文件夹 → `database/models/` 文件夹

3. **数据库脚本**：
   - `backend/cleanup-databases.js` → `database/cleanup-databases.js`
   - `backend/verify-db.js` → `database/verify-db.js`

#### 保留在 `backend/` 的文件
- 服务器核心文件：`server.js`
- 后端配置：`config/jwt.js`, `config/server.js`
- 路由：`routes/` 文件夹
- 控制器：`controllers/` 文件夹
- 中间件：`middleware/` 文件夹
- 服务：`services/` 文件夹
- 工具：`utils/` 文件夹
- 环境配置：`.env`, `.env.example`
- 依赖配置：`package.json`, `package-lock.json`

## 3. 文件引用更新

### 3.1 更新后端代码中的数据库引用
- 修改 `server.js` 中的数据库配置引用
- 修改 `models/` 文件夹移动后的引用路径
- 修改控制器和服务中对模型的引用

### 3.2 更新数据库脚本中的引用
- 修改 `cleanup-databases.js` 中的数据库配置引用
- 修改 `verify-db.js` 中的数据库配置引用

## 4. 测试验证

### 4.1 后端服务测试
- 启动后端服务器，验证数据库连接正常
- 测试 API 端点，确保数据操作正常

### 4.2 数据库脚本测试
- 运行 `database/cleanup-databases.js`，验证数据库清理功能
- 运行 `database/verify-db.js`，验证数据库验证功能

### 4.3 前端测试
- 启动前端开发服务器，验证与后端的连接正常
- 测试记账、统计等功能，确保数据流转正常

## 5. 整理步骤

1. 创建 `database/` 文件夹
2. 创建 `database/config/` 和 `database/models/` 子文件夹
3. 移动数据库相关文件到新位置
4. 更新所有文件引用路径
5. 测试后端服务
6. 测试数据库脚本
7. 测试前端功能
8. 清理临时文件和无效引用

## 6. 预期成果

- 清晰的项目结构，前端、后端和数据库文件分离
- 更好的代码组织和维护性
- 简化部署和开发流程
- 便于团队协作和代码管理

## 7. 注意事项

- 确保所有文件引用路径正确更新
- 测试过程中注意数据备份，避免数据丢失
- 确保环境变量配置正确
- 确保依赖包安装完整

通过以上整理计划，我们可以将项目的前端、后端和数据库文件清晰地分离，提高代码的可维护性和可扩展性。