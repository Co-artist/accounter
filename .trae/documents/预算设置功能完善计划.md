# 记账内容实时互通修改计划

## 问题分析

1. **交易数据**：首页和统计页面从 localStorage 加载，统计页面有监听 localStorage 变化，基本互通
2. **分类数据**：仅分类页面有模拟数据，未持久化，与其他页面不互通
3. **用户统计数据**：我的页面使用硬编码数据，未与实际交易关联

## 修改内容

### 1. 分类数据持久化与共享

* **修改文件**：`src/views/CategoryPage.vue`

* **修改内容**：

  * 将分类数据从模拟数据改为从 localStorage 加载

  * 添加分类数据变化监听，自动保存到 localStorage

  * 添加 localStorage 变化监听，实现跨页面数据同步

### 2. 实现数据共享机制

* **创建文件**：`src/store/index.js`

* **功能**：

  * 实现基于 localStorage 的数据持久化

  * 提供数据订阅发布机制

  * 统一管理交易、分类等核心数据

  * 提供数据更新、获取的 API

### 3. 更新首页数据管理

* **修改文件**：`src/views/HomePage.vue`

* **修改内容**：

  * 接入统一数据管理

  * 使用共享数据而非本地数据

### 4. 更新统计页面数据管理

* **修改文件**：`src/views/StatisticsPage.vue`

* **修改内容**：

  * 接入统一数据管理

  * 使用共享数据而非本地数据

### 5. 更新我的页面数据

* **修改文件**：`src/views/ProfilePage.vue`

* **修改内容**：

  * 移除硬编码数据

  * 从实际交易数据计算统计信息

  * 接入统一数据管理

### 6. 组件数据同步

* **修改组件**：`BalanceOverview.vue`、`TransactionList.vue` 等

* **修改内容**：

  * 确保组件使用共享数据

  * 实现数据变化实时响应

## 技术方案

* 使用 Vue 3 的 `provide/inject` API 实现数据共享

* 基于 localStorage 实现数据持久化

* 实现事件总线机制，用于跨组件数据同步

* 确保数据修改时所有相关组件都能实时更新

## 预期效果

* 分类、统计、我的和首页四部分的记账内容实时互通

* 任何页面的数据修改都会实时反映到其他页面

* 数据持久化存储，刷新页面后数据不丢失

* 统一的数据管理，便于后续功能扩展

