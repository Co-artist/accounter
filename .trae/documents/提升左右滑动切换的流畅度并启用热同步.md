## 现状与瓶颈定位
- 路由过渡：`src/App.vue:5-7` 使用 `<transition :name="transitionName">`，CSS 过渡在 `src/App.vue:311-352`，已使用 `transform` 与 `will-change`。
- 方向控制：`src/utils/navDirection.js:5-10,13-18` 通过 400ms 定时器复位。
- 手势导航：`src/utils/swipeNavigation.js:1-51` 仅监听 `touchstart/touchend`，被动监听，判定后执行 `router.push`。
- 底部导航：`src/components/BottomNavigation.vue:101-121` 根据 tab 索引设置左右方向后跳转。
- 页面负载：统计/分类/首页含大量图表与内容，首次切换时重新挂载→初始化较重（`echarts` 等），可能导致帧率下降。
- 开发环境：Vite 默认 HMR，`vite.config.js:7-10` 已开放 LAN；`capacitor.config.ts:13-18` 的 server 热重载配置处于注释状态。

## 改进目标
- 将左右滑动与底部点击的页面切换变得更顺滑，降低掉帧与卡顿感。
- 使代码改动可在设备上热同步（浏览器、模拟器、真机）。

## 优化方案
1. 启用页面缓存（KeepAlive）避免重建重载
- 在 `src/App.vue` 将 `router-view` 改为插槽形式，并用 `<KeepAlive>` 包裹：
  - 仅缓存主 Tab：`HomePage`、`StatisticsPage`、`CategoryPage`、`ProfilePage`。
  - 若组件无显式名称，补充 `defineOptions({ name: 'HomePage' })` 等（分别在各 `views/*.vue` 页）。
- 预期效果：同一页再次进入无需重新创建/初始化 `echarts` 等重资源，明显提升切换流畅度。

2. 将重型初始化延后到过渡后或空闲帧
- 在各页面的 `onMounted` 中，将图表初始化与大数据计算包裹在 `requestAnimationFrame`/`requestIdleCallback` 或 `setTimeout(0)` 内；
- 在缓存模式下使用 `onActivated` 做轻量刷新（如 `chart.resize()`），在 `onDeactivated` 暂停动画/监听但不 `dispose`。
- 参考位置：`src/views/StatisticsPage.vue` 初始化与 `attachSwipeNavigation` 出现于 `~140, ~478` 行；`HomePage.vue:173`。

3. 过渡与容器细化
- `src/App.vue`：为过渡容器增加 `contain: layout paint size`（或至少 `contain: paint`）到 `#app-content` 或页面根容器，限制重绘范围。
- 将过渡时间从 `0.3s` 视体验测试可下调至 `0.25s`（保留 `ease`）。
- 保留当前不使用 `transition-mode="out-in"` 的并行过渡，减少等待导致的卡顿；如遇页间闪烁再评估切换模式。

4. 手势判定稳健与防抖
- `src/utils/swipeNavigation.js` 当前 `cooldownMs: 300`；在引入缓存后，可适当提高至 `400-500ms` 以避免极快连触导致多次路由推送。
- 保持被动监听以免阻塞滚动；仅在确需阻止时才考虑 `preventDefault`（现状无需）。

5. 预加载下一页代码块
- 在应用启动后后台 `import()` 预拉取主 Tab 的懒加载路由组件，以减少首次切换的 chunk 加载延迟（在 `src/App.vue` 或路由激活后执行一次）。

## 热同步（HMR）配置
- 浏览器：`npm run dev`（`vite.config.js:7-10` 已允许局域网访问）。
- Android 模拟器：启用 Capacitor server 配置（`capacitor.config.ts:13-18` 取消注释），`url: 'http://10.0.2.2:3000'`；启动 Vite 后 `npx cap run android -l --external`。
- Android 真机：`url` 改为本机局域网 IP（如 `http://192.168.x.x:3000`）；Windows 放行 3000 端口；同样使用 `--external` 参数。
- 可在 `package.json` 增加脚本：`"cap:live": "npx cap run android -l --external"` 便捷启动。

## 变更清单（拟实施）
- `src/App.vue`：
  - 将 `<router-view />` 改为插槽 + `<KeepAlive>` 包裹，`include: ['HomePage','StatisticsPage','CategoryPage','ProfilePage']`；
  - 在 `#app-content` 或页面根容器增加 `contain` 样式；（可调过渡时长至 `0.25s`）
  - 启动后后台预加载主 Tab 组件。
- `src/views/HomePage.vue`、`StatisticsPage.vue`、`CategoryPage.vue`、`ProfilePage.vue`：
  - 添加组件名 `defineOptions({ name: 'XxxPage' })`；
  - 将图表/重任务初始化延后，并改用 `onActivated` 做轻刷新。
- `src/utils/swipeNavigation.js`：
  - 将默认 `cooldownMs` 调至 `400-500`，保留被动监听；
  - 保持当前阈值/比例，视测试结果微调。
- `capacitor.config.ts`：
  - 取消 `server` 注释并按环境设置 `url`（模拟器/真机）；
  - 使用 `cap:live` 脚本进行热同步调试。

## 验证与回归
- 在桌面浏览器与 Android 模拟器上进行：
  - 快速左右滑动与底部点击切换，观察是否无明显掉帧；
  - 首次进入重页（统计/分类）是否快速显示，后续切换是否更即时；
  - HMR 是否在设备上实时生效。
- 如仍有抖动：
  - 进一步减少首屏渲染负载（懒加载图片、骨架屏）、压缩阴影/模糊效果；
  - 按页面逐项剖析（`performance` 面板）定位具体热点。