# 饼图布局优化计划

## 一、当前问题分析

1. **图例位置不合理**：右侧垂直排列的图例占用大量空间，导致饼图过小
2. **图例项过多**：在移动端可能超出屏幕范围
3. **标签显示不完整**：扇区标签有省略号，信息不完整
4. **整体布局拥挤**：图表区域内边距和间距不合理
5. **移动端适配差**：未充分考虑小屏幕设备的显示效果

## 二、优化方案

### 1. 图例位置调整
- 将图例从右侧移至饼图下方
- 采用水平排列方式，节省垂直空间
- 支持图例滚动，处理大量图例项

### 2. 饼图大小优化
- 增大饼图半径，提高视觉占比
- 调整饼图中心位置，避免与其他元素重叠

### 3. 标签显示优化
- 仅显示主要类别的标签（如占比大于5%的类别）
- 使用简洁的标签格式，避免文字过长
- 支持悬停显示完整标签信息

### 4. 布局调整
- 减少图表区域内边距
- 优化标题和筛选器的布局
- 增加图表区域的高度，提高显示效果

### 5. 交互优化
- 点击扇区显示详细信息
- 悬停时高亮显示对应扇区和图例
- 支持图例项点击切换显示/隐藏

## 三、实现步骤

1. **修改饼图配置**：
   - 调整legend.position为'bottom'
   - 调整legend.orient为'horizontal'
   - 增大series.radius值
   - 优化label和tooltip配置

2. **调整CSS样式**：
   - 增加图表容器高度
   - 调整内边距和间距
   - 优化移动端适配样式

3. **测试优化效果**：
   - 在不同屏幕尺寸下测试
   - 验证图例显示完整性
   - 测试交互功能

4. **性能优化**：
   - 优化数据处理逻辑
   - 减少不必要的渲染
   - 确保流畅的用户体验

## 四、预期效果

1. 饼图在移动端显示更清晰、更完整
2. 图例位置合理，不占用过多空间
3. 标签显示完整，信息易于获取
4. 整体布局简洁大方，适配各种屏幕尺寸
5. 交互流畅，用户体验良好

## 五、关键代码修改点

1. **StatisticsPage.vue**：
   - updatePieChart函数中的option配置
   - 饼图容器的CSS样式
   - 移动端响应式样式调整

2. **主要配置项**：
   - legend.position: 'bottom'
   - legend.orient: 'horizontal'
   - series.radius: ['40%', '70%']
   - label.show: true（条件显示）
   - label.formatter: 简洁格式
   - tooltip.trigger: 'item'

通过以上优化，饼图将更加适应移动端屏幕，提供更好的视觉效果和用户体验。